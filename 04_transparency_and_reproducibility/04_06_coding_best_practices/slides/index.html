<!doctype html>

<html>
	<script src="plugin/markdown/markdown.js"></script>
	<script>
	  Reveal.initialize({
	    plugins: [ RevealMarkdown ]
	  });
	</script>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="dist/reset.css">
		<link rel="stylesheet" href="dist/reveal.css">
		<link rel="stylesheet" href="dist/theme/white.css" id="theme">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="plugin/highlight/zenburn.css" id="highlight-theme">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<p style="font-size:40px"> Module 2: Digitalisation in Research<p>
					<p style="font-size:70px"> Coding best practices<p>
					<p style="font-size:30px"> Jana Lasser<p>
					<p style="font-size:30px"> <em>TU Graz & CSH Vienna</em><p>
					<p style="font-size:30px"> 2021-11-25<p>
				</section>

				<section>
					<section data-transition="slide-in none">
						<p style="font-size:60px; padding-bottom:0.75em"> The aims of coding best practices</p>
						<p style="font-size:40px; padding-bottom:0.75em"> <em>Enable others to ...</em></p>
						<p class="fragment fade-in"; style="font-size: 40px; padding-left: 1em; text-align: left;">... <span style="color:#C0392B">find</span> your code.</p>
						<p class="fragment fade-in"; style="font-size: 40px; padding-left: 1em; text-align: left;">... <span style="color:#C0392B">understand</span> your code.</p>
						<p class="fragment fade-in"; style="font-size: 40px; padding-left: 1em; text-align: left;">... <span style="color:#C0392B">run</span> your code.</p>
					</section>
					<section data-transition="none slide-out">
						<p style="font-size:60px; padding-bottom:0.75em"> The aims of coding best practices</p>
						<p style="font-size:40px; padding-bottom:0.75em;"> <em>Enable others to ...</em></p>
						<p style="font-size: 40px; padding-left: 1em; text-align: left">... <span style="color:#C0392B">find</span> your code &#8594 <em>code repositories</em></p>
						<p style="font-size: 40px; padding-left: 1em; text-align: left;">... <span style="color:#C0392B">understand</span> your code &#8594 <em>comments & documentation</em></p>
						<p style="font-size: 40px; padding-left: 1em; text-align: left;">... <span style="color:#C0392B">run</span> your code &#8594 <em>dependencies & containers</em></p>
					</section>
				</section>

				<section>
					<section>
						<p style="font-size:60px; padding-bottom:0.75em"> Enable others to <span style="color:#C0392B">understand</span> your code</p>
					</section>
					<section>
						<p style="font-size:60px; padding-bottom:0.75em"> Commenting best practices</p>
						 <pre class="python"><code data-trim data-noescape, style="font-size: 20px; line-height:125%">
					        # mesa models already implement fixed seeds through their own random
					        # number generations. Sadly, we need to use the Weibull distribution
					        # here, which is not implemented in mesa's random number generation
					        # module. Therefore, we need to initialize the numpy random number
					        # generator with the given seed as well
					        if seed != None:
					            np.random.seed(seed)

					        # sets the (daily) transmission risk for a household contact without
					        # any precautions. Target infection ratios are taken from literature
					        # and the value of the base_transmission_risk is calibrated such that
					        # the simulation produces the correct infection ratios in a household
					        # setting with the given distributions for epidemiological parameters
					        # of agents
					        self.base_transmission_risk = base_transmission_risk   
						  </code></pre>
						  <p style="font-size:35px; padding-top: 1em;"> Write <em>why</em> you did something, not <em>what</em> you did.</p>
					</section>
					<section>
						<p style="font-size:60px; padding-bottom:0.75em"> Commenting best practices</p>
						 <pre class="python"><code data-trim data-noescape; style="font-size: 15px; line-height:125%">
							def get_floor_distribution(N_floors, N_classes):
								"""
								Distribute the number of classes evenly over the number of available floors.

								Parameters
								----------
								N_floors : int
									Number of available floors.
								N_classes : int
									Number of classes in the school.

								Returns
								-------
								floors : dictionary
									Dictionary of the form {floor1:[class_1, class_2, ...], ...}
								floors_inv : dictionary
									Dictionary of the form {class1:floor1, ..., class_N:floor_N}
								"""

								floors = {i:[] for i in range(N_floors)} # starts with 0 (ground floor)
								classes = list(range(1, N_classes + 1))
								classes_per_floor = int(N_classes / N_floors)     
						  </code></pre>
						  <p style="font-size:35px; padding-top: 1em;"> Comment your functions and classes.</p>
					</section>
					<section>
						<p style="font-size:60px; padding-bottom:0.75em"> Commenting best practices</p>
						<img src="img/commenting_while_coding.svg" width="1000"></p>
						<p style="font-size:35px; padding-top: 1em;"> Comment while you code and/or while your code is running.</p>
					</section>
					<section>
						<p style="font-size:60px; padding-bottom:0.75em"> Commenting best practices</p>
						<p style="font-size:40px; padding-bottom:0.75em"> <em>You copied some code from Stack Owerflow?</em></p>
						<p style="font-size:35px; padding-left:2em; padding-bottom: 1em; text-align: left;"> <span style="color:#C0392B">Best</span>: understand it and comment in your own words.</p>
						<p style="font-size:35px; padding-left:2em; text-align: left;"> <span style="color:#C0392B">Second best</span>: leave a note to the post where you found the code.
						 <pre class="python"><code data-trim data-noescape; style="font-size: 15px; line-height:125%">
							<!-- copied from 
							https://stackoverflow.com/questions/23793448/syntax-highlighting-code-in-reveal-js-how-to -->

							<link rel="stylesheet" href="plugin/highlight/zenburn.css" id="highlight-theme">  
						  </code></pre></p>
					</section>
					<section>
						<p style="font-size:55px; padding-bottom:0.75em"> Code style: making <em>the code</em> readable</p>
						<p style="font-size:35px; padding-left: 1em; padding-right: 1em; text-align:left"> <em>A style guide is about consistency. Consistency with this style guide is important. Consistency within a project is more important. Consistency within one module or function is the most important.</em></p>
						<p style="font-size: 35px; text-align: right; padding-right: 1em;"><a href="https://www.python.org/dev/peps/pep-0008/">PEP 8 - Style Guide for Python Code</a></p>
						<p class="fragment fade-in", style="font-size: 35px; text-align: left; padding-left: 1em; padding-top:1em">When you start a new project: <br>
							<span style="font-size: 35px; text-align: left; padding-left: 1em;">- Have a look at the language's style guide.</span><br>
							<span style="font-size: 35px; text-align: left; padding-left: 1em;">- What conventions make sense for your project?</span><br>
							<span style="font-size: 35px; text-align: left; padding-left: 1em;">- Consider using a code formatter (example <a href="https://github.com/psf/black">black</a>).</span> </p>
					</section>
				</section>

				<section>
					<section>
						<p style="font-size:60px; padding-bottom:0.75em"> Enable others to <span style="color:#C0392B">run</span> your code</p>
					</section>
					<section>
						<p style="font-size:60px; padding-bottom:0.75em"> Challenges</p>
						<p> Code <span style="color:#C0392B">dependencies</span></p>
						<p> Dependency <span style="color:#C0392B">versions</span></p>
						<p> System <span style="color:#C0392B">requirements</span></p>
					</section>
					<section>
						<p style="font-size:60px; padding-bottom:0.75em"> Code dependencies</p>
						<pre class="python"><code data-trim data-noescape; style="font-size: 25px; line-height:150%"; data-line-numbers="1|3-4|6">
							import math 		# standard module

							import numpy as np 	# third-party package
							import mesa		# third-party package

							import scseirx   	# custom package 
						 </code></pre>
						 <p style="padding-top: 1em; font-size: 35px;"> Almost all modern code <span style="color:#C0392B">depends</span> on other code (libraries, packages).</p>
					</section>
					<section>
						<p style="font-size:60px"> List all code dependencies</p>
						<pre class="python"><code data-trim data-noescape; style="font-size: 20px; line-height:125%">
							appdirs==1.4.3
							argon2-cffi==20.1.0
							arrow==0.17.0
							async-generator==1.10
							attrs==20.3.0
							backcall==0.2.0
							binaryornot==0.4.4
							...
						</code></pre>
						<p style="font-size: 35px;"> For Python: write a requirements file:</p>
						<pre class="python"><code data-trim data-noescape; style="font-size: 20px; line-height:150%">
							pip freeze > requirements.txt
						 </code></pre>
						<p style="font-size: 35px;"> Install all requirements for a repository:</p>
						<pre class="python"><code data-trim data-noescape; style="font-size: 20px; line-height:150%">
							pip install -r requirements.txt
						 </code></pre>
						 <p style="font-size: 35px;"> Encapsulate your coding projects in <a href="https://docs.python.org/3/tutorial/venv.html">virtual environments</a>.</p>
					</section>				
					<section>
						<p style="font-size:60px"> Code versions</p>
						<img src="img/code_version.svg" width="700"></p>
						 <p style="font-size: 35px;"> Packages are <span style="color:#C0392B">under development</span> themselves. Releases are indicated by versions.</p>
					</section>
					<section>
						<p style="font-size:60px"> Code Versions</p>
						 <p style="font-size: 35px; text-align:left; padding-left:1em; padding-bottom:1em"> Aim: make your code <span style="color:#C0392B">usable</span> by others: consider <em>releasing a package</em> (workflow for <a href="https://packaging.python.org/tutorials/packaging-projects/">Python</a>).</p>
						 <p style="font-size: 35px; text-align:left; padding-left:1em"> Aim: make your code <span style="color:#C0392B">citable</span> by others: <em>assign a <a href="https://www.doi.org/">DOI</a></em> to a code version (workflow for <a href="https://guides.lib.berkeley.edu/citeyourcode"> Zenodo</a>).</p>
					</section>
				</section>
				<section>
					<p style="font-size:60px"> System requirements</p>
					<p> Hardware requirements </p>
					<p> Language versions </p>
					<p> Driver versions </p>
					<p> Compiler versions</p>
					<p> ... </p>
					<p class="fragment fade-in"; style="padding-top: 1em;"> <span style="color:#C0392B">Document</span> these in the repository's <span style="color:#C0392B">README</span>!</p>
				</section>
			</div>
		</div>

		<script src="dist/reveal.js"></script>
		<script src="plugin/notes/notes.js"></script>
		<script src="plugin/markdown/markdown.js"></script>
		<script src="plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
